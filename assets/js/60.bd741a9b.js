(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{422:function(t,a,s){"use strict";s.r(a);var e=s(7),i=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"activemq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activemq"}},[t._v("#")]),t._v(" ActiveMQ")]),t._v(" "),a("h2",{attrs:{id:"activemq入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activemq入门"}},[t._v("#")]),t._v(" ActiveMQ入门")]),t._v(" "),a("h3",{attrs:{id:"activemq是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activemq是什么"}},[t._v("#")]),t._v(" ActiveMQ是什么")]),t._v(" "),a("ul",[a("li",[t._v("ActiveMQ是Apache出品，最流行，能力强劲的开源消息总线")]),t._v(" "),a("li",[t._v("ActiveMQ是一个完全支持JMS1.1和J2EE1.4规范的JMS Privoder实现，尽管JMS规范已经是出台很久的事情了，但是JMS在当今J2EE应用中仍然扮演着特殊的地位。")])]),t._v(" "),a("h3",{attrs:{id:"jms规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jms规范"}},[t._v("#")]),t._v(" JMS规范")]),t._v(" "),a("h4",{attrs:{id:"jms是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jms是什么"}},[t._v("#")]),t._v(" JMS是什么")]),t._v(" "),a("ul",[a("li",[t._v("Java消息服务（Java Message Service，即JMS）应用程序接口是一个Java平台中关于面向消息中间件（MOM）的API，用于在两个应用程序之间，或分布式系统中发送消息，进行异步通信。Java消息服务是一个与具体平台无关的API。")])]),t._v(" "),a("h4",{attrs:{id:"jms对象模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jms对象模型"}},[t._v("#")]),t._v(" JMS对象模型")]),t._v(" "),a("h5",{attrs:{id:"对象模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对象模型"}},[t._v("#")]),t._v(" 对象模型")]),t._v(" "),a("ul",[a("li",[t._v("ConnectionFactory----连接工厂")]),t._v(" "),a("li",[t._v("Connection----连接")]),t._v(" "),a("li",[t._v("Session----会话")]),t._v(" "),a("li",[t._v("Destination----目的")]),t._v(" "),a("li",[t._v("MessageProducer----生产者")]),t._v(" "),a("li",[t._v("MessageConsumer----消费者")]),t._v(" "),a("li",[t._v("Message----消息")]),t._v(" "),a("li",[t._v("Broker----消息中间件的实例（ActiveMQ)")])]),t._v(" "),a("h5",{attrs:{id:"通信模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通信模型"}},[t._v("#")]),t._v(" 通信模型")]),t._v(" "),a("ul",[a("li",[t._v("Point to Point(P2P)/点对点\n"),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20210511225826.png",alt:"20210511225826"}})]),t._v(" "),a("li",[t._v("Publish/Subscribe/主题（发布订阅）\n"),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20210511230624.png",alt:"20210511230624"}})])]),t._v(" "),a("h4",{attrs:{id:"jms消息结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jms消息结构"}},[t._v("#")]),t._v(" JMS消息结构")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20210511230914.png",alt:"20210511230914"}})]),t._v(" "),a("h5",{attrs:{id:"消息头-关于一些消息的描述信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消息头-关于一些消息的描述信息"}},[t._v("#")]),t._v(" 消息头----关于一些消息的描述信息")]),t._v(" "),a("ul",[a("li",[t._v("JMSDestination----消息的目的地，Topic或Queue")]),t._v(" "),a("li",[t._v("JMSDeliverMode----消息的发送模式")]),t._v(" "),a("li",[t._v("JMSTimestamp----消息传递给Broker（消息中间件的实例）的时间戳，它不是实际的发送时间")]),t._v(" "),a("li",[t._v("JMSExpiration----消息的有效期，有效期内，消息的消费者才能消费这个消息")]),t._v(" "),a("li",[t._v("JMSPriority----消息的优先级。0-4级为正常，5-9级为高优先级")]),t._v(" "),a("li",[t._v("JMSMessageID----一个字符串用来唯一标识一个消息")]),t._v(" "),a("li",[t._v("JMSReplyTo----有时消息生产者希望消费者回复一个消息，JMSReplyTo为一个Destination，表示需要回复的目的地")]),t._v(" "),a("li",[t._v("JMSCollectionID----通常用来关联多个Message")]),t._v(" "),a("li",[t._v("JMSType----表示消息体的结构，和JMS提供者有关")]),t._v(" "),a("li",[t._v("JMSRedelivery----如果这个值为true，表示消息被重新发送了")])]),t._v(" "),a("h5",{attrs:{id:"消息属性-可以理解为消息的附加消息头-属性名可以自定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消息属性-可以理解为消息的附加消息头-属性名可以自定义"}},[t._v("#")]),t._v(" 消息属性----可以理解为消息的附加消息头，属性名可以自定义")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20210511232018.png",alt:"20210511232018"}})]),t._v(" "),a("h5",{attrs:{id:"消息体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消息体"}},[t._v("#")]),t._v(" 消息体")]),t._v(" "),a("ul",[a("li",[t._v("消息体类型\n"),a("ul",[a("li",[t._v("ByteMessage----用来传递字节信息")]),t._v(" "),a("li",[t._v("MapMessage----用来传递键值对信息")]),t._v(" "),a("li",[t._v("ObjectMessage----用来传递序列化对象")]),t._v(" "),a("li",[t._v("StreamMessage----用来传递文件等")]),t._v(" "),a("li",[t._v("TextMessage----用来传递字符串")])])])]),t._v(" "),a("h3",{attrs:{id:"activemq的特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activemq的特性"}},[t._v("#")]),t._v(" ActiveMQ的特性")]),t._v(" "),a("ul",[a("li",[t._v("支持多种编程语言")]),t._v(" "),a("li",[t._v("支持多种传输协议")]),t._v(" "),a("li",[t._v("有多种持久化方式")])]),t._v(" "),a("h3",{attrs:{id:"activemq安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activemq安装"}},[t._v("#")]),t._v(" ActiveMQ安装")]),t._v(" "),a("h4",{attrs:{id:"安装及启动-停止"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装及启动-停止"}},[t._v("#")]),t._v(" 安装及启动/停止")]),t._v(" "),a("ul",[a("li",[t._v("cd /tmp")]),t._v(" "),a("li",[t._v("wget -c https://mirrors.bfsu.edu.cn/apache//activemq/5.16.2/apache-activemq-5.16.2-bin.tar.gz")]),t._v(" "),a("li",[t._v("tar -zxvf apache-activemq-5.16.2-bin.tar.gz -C /var")]),t._v(" "),a("li",[t._v("mv /var/apache-activemq-5.16.2/ /var/activemq/")]),t._v(" "),a("li",[t._v("/var/activemq/bin/activemq start")]),t._v(" "),a("li",[t._v("/var/activemq//bin/activemq stop")])]),t._v(" "),a("h4",{attrs:{id:"将activemq作为服务启动-可以确保在系统启动的时候自启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将activemq作为服务启动-可以确保在系统启动的时候自启动"}},[t._v("#")]),t._v(" 将ActiveMQ作为服务启动，可以确保在系统启动的时候自启动")]),t._v(" "),a("ul",[a("li",[t._v("使用vim创建一个systemd服务文件\n"),a("ul",[a("li",[a("p",[t._v("vi /usr/lib/systemd/system/activemq.service")])]),t._v(" "),a("li",[a("p",[t._v("填入以下内容")]),t._v(" "),a("div",{staticClass:"language-txt line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-txt"}},[a("code",[t._v("[Unit]\nDescription=ActiveMQ service\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/var/activemq/bin/activemq start\nExecStop=/var/activemq/bin/activemq stop\nUser=root\nGroup=root\nRestart=always\nRestartSec=9\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=activemq\n\n[Install]\nWantedBy=multi-user.target\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("修改/var/activemq/bin/env配置，找到最后\n"),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20210512000329.png",alt:"20210512000329"}})])]),t._v(" "),a("li",[a("p",[t._v("将JAVA_HOME注释取消，填入jdk安装路径("),a("strong",[t._v("使用whereis java命令查找安装路径")]),t._v(")\n"),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20210512000422.png",alt:"20210512000422"}})])]),t._v(" "),a("li",[a("p",[t._v("启动ActiveMQ服务")]),t._v(" "),a("ul",[a("li",[t._v("systemctl start activemq")])])]),t._v(" "),a("li",[a("p",[t._v("查看服务状态")]),t._v(" "),a("ul",[a("li",[t._v("systemctl status activemq")])])]),t._v(" "),a("li",[a("p",[t._v("设置开机自启动")]),t._v(" "),a("ul",[a("li",[t._v("ln -s /usr/lib/systemd/system/activemq.service /etc/systemd/system/multi-user.target.wants/activemq.service")]),t._v(" "),a("li",[t._v("systemctl enable activemq")]),t._v(" "),a("li",[t._v("检测是否自启动systemctl list-unit-files | grep activemq")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("防火墙添加ActiveMQ端口")])]),t._v(" "),a("ul",[a("li",[t._v("查看端口\n"),a("ul",[a("li",[t._v("firewall-cmd --list-ports")])])]),t._v(" "),a("li",[t._v("添加端口\n"),a("ul",[a("li",[t._v("#Web管理端口默认为8161，通讯端口默认为61616")]),t._v(" "),a("li",[t._v("firewall-cmd --zone=public --add-port=8161/tcp --permanent")]),t._v(" "),a("li",[t._v("firewall-cmd --zone=public --add-port=61616/tcp --permanent")])])]),t._v(" "),a("li",[t._v("重启防火墙\n"),a("ul",[a("li",[t._v("systemctl restart firewalld.service")])])]),t._v(" "),a("li",[t._v("或者直接关闭防火墙\n"),a("ul",[a("li",[t._v("systemctl stop firewalld.service")])])])])])])])]),t._v(" "),a("h3",{attrs:{id:"activemq使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activemq使用"}},[t._v("#")]),t._v(" ActiveMQ使用")])])}),[],!1,null,null,null);a.default=i.exports}}]);