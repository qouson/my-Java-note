(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{439:function(t,a,v){"use strict";v.r(a);var _=v(7),i=Object(_.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mybatis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis"}},[t._v("#")]),t._v(" MyBatis")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/202406012114192.png",alt:""}})]),t._v(" "),a("p",[t._v("mybatis 是一个支持普通 SQL查询，存储过程和高级映射的优秀持久层框架。ORM（Object Relational Mapping）对象关系映射")]),t._v(" "),a("h2",{attrs:{id:"源码分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码分析"}},[t._v("#")]),t._v(" 源码分析")]),t._v(" "),a("ul",[a("li",[t._v("SqlSessionFactoryBuilder().build(inputStream)，解析配置文件，创建SqlSessionFactory，封装到configuration中\n"),a("ul",[a("li",[t._v("XMLConfigBuilder().parse()\n"),a("ul",[a("li",[t._v("xml解析")]),t._v(" "),a("li",[t._v("数据库环境配置")]),t._v(" "),a("li",[t._v("类型处理器")]),t._v(" "),a("li",[t._v("别名处理器")]),t._v(" "),a("li",[t._v("插件")])])]),t._v(" "),a("li",[t._v("XmlMapperBuilder().parse()\n"),a("ul",[a("li",[t._v("解析mapper.xml")]),t._v(" "),a("li",[t._v("CRUD")]),t._v(" "),a("li",[t._v("resultMap")])])])])]),t._v(" "),a("li",[t._v("数据源\n"),a("ul",[a("li",[t._v("解析proterties文件")]),t._v(" "),a("li",[t._v("解析config.xml")]),t._v(" "),a("li",[t._v("xml映射到JavaBean")]),t._v(" "),a("li",[t._v("创建数据源dataSource")])])]),t._v(" "),a("li",[t._v("执行语句\n"),a("ul",[a("li",[t._v("mappers，有多种获取方式，优先级从上到下\n"),a("ul",[a("li",[t._v("package")]),t._v(" "),a("li",[t._v("resources")]),t._v(" "),a("li",[t._v("url")]),t._v(" "),a("li",[t._v("mapper interface classes")])])]),t._v(" "),a("li",[t._v("封装成MappedStatement")])])]),t._v(" "),a("li",[t._v("操作数据库\n"),a("ul",[a("li",[t._v("执行器Eexcutor\n"),a("ul",[a("li",[t._v("执行器类型\n"),a("ul",[a("li",[t._v("SIMPLE:默认")]),t._v(" "),a("li",[t._v("REUSE:复用")]),t._v(" "),a("li",[t._v("BATCH:批量")])])]),t._v(" "),a("li",[t._v("一级缓存开启所在源码\n"),a("ul",[a("li",[t._v("BaseExecutor")]),t._v(" "),a("li",[t._v("SqlSession级别的")])])]),t._v(" "),a("li",[t._v("开启二级缓存\n"),a("ul",[a("li",[t._v("CachingExecutor，包装BaseExecutor")]),t._v(" "),a("li",[t._v("灵活性不高，一般不使用")])])])])]),t._v(" "),a("li",[t._v("执行过程\n"),a("ul",[a("li",[t._v("configuration.getMappedStatement()")]),t._v(" "),a("li",[t._v("语法引擎，改写sql")])])]),t._v(" "),a("li",[t._v("缓存一致性")])])]),t._v(" "),a("li",[t._v("插件(责任链模式)\n"),a("ul",[a("li",[t._v("增强四大核心对象，动态代理\n"),a("ul",[a("li",[t._v("Eexcutor")]),t._v(" "),a("li",[t._v("StaementHandler")]),t._v(" "),a("li",[t._v("ParamterHandler")]),t._v(" "),a("li",[t._v("ResultSetHandler")])])]),t._v(" "),a("li",[t._v("插件举例\n"),a("ul",[a("li",[t._v("分页插件")]),t._v(" "),a("li",[t._v("读写分离插件")])])])])])]),t._v(" "),a("h2",{attrs:{id:"常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),a("h3",{attrs:{id:"mybatis优缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis优缺点"}},[t._v("#")]),t._v(" MyBatis优缺点")]),t._v(" "),a("h4",{attrs:{id:"优点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[t._v("#")]),t._v(" 优点")]),t._v(" "),a("ul",[a("li",[t._v("基于SQL变成，编写SQL与程序解耦，便于管理")]),t._v(" "),a("li",[t._v("封装了JDBC一套，减少代码量，减少连接维护")]),t._v(" "),a("li",[t._v("很好的与多种数据库兼容，只要支持JDBC，MyBatis就能支持")]),t._v(" "),a("li",[t._v("很好的与Spring集成")])]),t._v(" "),a("h4",{attrs:{id:"缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[t._v("#")]),t._v(" 缺点")]),t._v(" "),a("ul",[a("li",[t._v("提供映射标签，对开发人员编写SQL有一定要求")])]),t._v(" "),a("h3",{attrs:{id:"mybatis中的-和-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis中的-和-的区别"}},[t._v("#")]),t._v(" MyBatis中的${}和#{}的区别")]),t._v(" "),a("ul",[a("li",[t._v("#{}是预编译处理，是占位符；${}是字符串替换，是拼接符")]),t._v(" "),a("li",[t._v("MyBatis在处理#{}时，会将sql中的#{}替换成？号，调用PreparedStatement的set方法来赋值")]),t._v(" "),a("li",[t._v("MyBatis在处理${}时，就是把${}替换成变量的值，用Statement来赋值")]),t._v(" "),a("li",[t._v("使用#{}可以有效的防止SQL注入，提高系统安全性")])]),t._v(" "),a("h3",{attrs:{id:"mybatis和hiberate的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis和hiberate的区别"}},[t._v("#")]),t._v(" MyBatis和Hiberate的区别")]),t._v(" "),a("h4",{attrs:{id:"开发速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发速度"}},[t._v("#")]),t._v(" 开发速度")]),t._v(" "),a("ul",[a("li",[t._v("MyBatis上手容易，较快，敏捷开发")]),t._v(" "),a("li",[t._v("HiBerate上手较慢，较难，封装度高")])]),t._v(" "),a("h4",{attrs:{id:"开发工作量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发工作量"}},[t._v("#")]),t._v(" 开发工作量")]),t._v(" "),a("ul",[a("li",[t._v("MyBatis需要大量XML配置文件，开发工作量大")]),t._v(" "),a("li",[t._v("HiBerate需要编写实体类，开发工作量小，有良好的映射机制")])]),t._v(" "),a("h4",{attrs:{id:"sql优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql优化"}},[t._v("#")]),t._v(" SQL优化")]),t._v(" "),a("ul",[a("li",[t._v("MyBatis可以精致优化")]),t._v(" "),a("li",[t._v("Hibernate会查出所有字段")])]),t._v(" "),a("h4",{attrs:{id:"对象管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对象管理"}},[t._v("#")]),t._v(" 对象管理")]),t._v(" "),a("ul",[a("li",[t._v("MyBatis没有对象状态管理")]),t._v(" "),a("li",[t._v("Hibernate有对象状态管理")])]),t._v(" "),a("h4",{attrs:{id:"缓存机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存机制"}},[t._v("#")]),t._v(" 缓存机制")]),t._v(" "),a("ul",[a("li",[t._v("MyBatis需要在每个表-对象映射中配置")]),t._v(" "),a("li",[t._v("Hibernate在SessionFactory中配置")])]),t._v(" "),a("h3",{attrs:{id:"mybatis插件的原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis插件的原理"}},[t._v("#")]),t._v(" MyBatis插件的原理")]),t._v(" "),a("ul",[a("li",[t._v("使用JDK动态代理")]),t._v(" "),a("li",[t._v("只针对ParameterHandler，ResultSetHandler，StatementHandler，Executor四个接口进行增强，当执行这四个接口，就会进入拦截方法interceptor()")])])])}),[],!1,null,null,null);a.default=i.exports}}]);