<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JUC | Qouson&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/logo.png">
    <meta name="description" content="Java技术博客,专注Java学习与总结。">
    <meta name="keywords" content="Java后端博客,个人技术博客,后端,后端开发,后端框架,web后端,后端面试题,技术文档,学习,面试,Spring,Spring MVC,Spring Boot,Mybatis,Redis,Kafka,Zookeeper,Dubbo,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.7c783487.css" as="style"><link rel="preload" href="/assets/js/app.001dee7f.js" as="script"><link rel="preload" href="/assets/js/2.9f32b1ef.js" as="script"><link rel="preload" href="/assets/js/43.0d87b11c.js" as="script"><link rel="prefetch" href="/assets/js/10.bf6bdccb.js"><link rel="prefetch" href="/assets/js/11.1abb3dd1.js"><link rel="prefetch" href="/assets/js/12.25097659.js"><link rel="prefetch" href="/assets/js/13.83164ea2.js"><link rel="prefetch" href="/assets/js/14.1e2f205b.js"><link rel="prefetch" href="/assets/js/15.46f653de.js"><link rel="prefetch" href="/assets/js/16.0219790a.js"><link rel="prefetch" href="/assets/js/17.c14d2772.js"><link rel="prefetch" href="/assets/js/18.d6e867d4.js"><link rel="prefetch" href="/assets/js/19.bec4eb52.js"><link rel="prefetch" href="/assets/js/20.301c9423.js"><link rel="prefetch" href="/assets/js/21.6c3b3934.js"><link rel="prefetch" href="/assets/js/22.f1ae2c75.js"><link rel="prefetch" href="/assets/js/23.f7a6d7ce.js"><link rel="prefetch" href="/assets/js/24.01a394c9.js"><link rel="prefetch" href="/assets/js/25.168f6a5c.js"><link rel="prefetch" href="/assets/js/26.f3699aa4.js"><link rel="prefetch" href="/assets/js/27.c3e90915.js"><link rel="prefetch" href="/assets/js/28.51103a35.js"><link rel="prefetch" href="/assets/js/29.e1a6c8eb.js"><link rel="prefetch" href="/assets/js/3.a85d349d.js"><link rel="prefetch" href="/assets/js/30.d50c88f6.js"><link rel="prefetch" href="/assets/js/31.14e9be9d.js"><link rel="prefetch" href="/assets/js/32.4e38a35f.js"><link rel="prefetch" href="/assets/js/33.244884f2.js"><link rel="prefetch" href="/assets/js/34.ddc04cb8.js"><link rel="prefetch" href="/assets/js/35.e0abcbeb.js"><link rel="prefetch" href="/assets/js/36.80f619c9.js"><link rel="prefetch" href="/assets/js/37.46a9c9c6.js"><link rel="prefetch" href="/assets/js/38.b02394cc.js"><link rel="prefetch" href="/assets/js/39.96e566a4.js"><link rel="prefetch" href="/assets/js/4.d209647e.js"><link rel="prefetch" href="/assets/js/40.ff1ee370.js"><link rel="prefetch" href="/assets/js/41.4c52f4ff.js"><link rel="prefetch" href="/assets/js/42.63397116.js"><link rel="prefetch" href="/assets/js/44.c4b6515c.js"><link rel="prefetch" href="/assets/js/45.520af4b4.js"><link rel="prefetch" href="/assets/js/46.6b651d08.js"><link rel="prefetch" href="/assets/js/47.2e2cc573.js"><link rel="prefetch" href="/assets/js/48.b023f265.js"><link rel="prefetch" href="/assets/js/49.10566b74.js"><link rel="prefetch" href="/assets/js/5.cca480c9.js"><link rel="prefetch" href="/assets/js/50.a9c6f297.js"><link rel="prefetch" href="/assets/js/51.72652a30.js"><link rel="prefetch" href="/assets/js/52.30da4f33.js"><link rel="prefetch" href="/assets/js/53.ae22272c.js"><link rel="prefetch" href="/assets/js/54.db657dae.js"><link rel="prefetch" href="/assets/js/55.6aa60f67.js"><link rel="prefetch" href="/assets/js/56.9e045727.js"><link rel="prefetch" href="/assets/js/57.37702dc8.js"><link rel="prefetch" href="/assets/js/58.387f648b.js"><link rel="prefetch" href="/assets/js/59.f5d96eac.js"><link rel="prefetch" href="/assets/js/6.82001ca2.js"><link rel="prefetch" href="/assets/js/60.bd741a9b.js"><link rel="prefetch" href="/assets/js/61.43bc986c.js"><link rel="prefetch" href="/assets/js/62.1794e555.js"><link rel="prefetch" href="/assets/js/63.086f3156.js"><link rel="prefetch" href="/assets/js/64.53ff57df.js"><link rel="prefetch" href="/assets/js/65.743b1eb9.js"><link rel="prefetch" href="/assets/js/66.291cc462.js"><link rel="prefetch" href="/assets/js/67.d9e67130.js"><link rel="prefetch" href="/assets/js/68.47a77e3d.js"><link rel="prefetch" href="/assets/js/69.02cdd084.js"><link rel="prefetch" href="/assets/js/7.fbb05d84.js"><link rel="prefetch" href="/assets/js/70.039c3c9e.js"><link rel="prefetch" href="/assets/js/71.7df7824f.js"><link rel="prefetch" href="/assets/js/72.b97f78b1.js"><link rel="prefetch" href="/assets/js/73.03a0a0fb.js"><link rel="prefetch" href="/assets/js/74.de7b90a9.js"><link rel="prefetch" href="/assets/js/75.d4acda13.js"><link rel="prefetch" href="/assets/js/76.a21fa6c2.js"><link rel="prefetch" href="/assets/js/77.bda8cd14.js"><link rel="prefetch" href="/assets/js/78.c0c6cec9.js"><link rel="prefetch" href="/assets/js/79.85937016.js"><link rel="prefetch" href="/assets/js/8.417abde4.js"><link rel="prefetch" href="/assets/js/80.dc8c5c6c.js"><link rel="prefetch" href="/assets/js/81.6119b7d5.js"><link rel="prefetch" href="/assets/js/82.afae6245.js"><link rel="prefetch" href="/assets/js/83.24d9bbe3.js"><link rel="prefetch" href="/assets/js/84.426d42e8.js"><link rel="prefetch" href="/assets/js/85.df3568fa.js"><link rel="prefetch" href="/assets/js/86.ca7630d7.js"><link rel="prefetch" href="/assets/js/87.20510d21.js"><link rel="prefetch" href="/assets/js/88.78063b5a.js"><link rel="prefetch" href="/assets/js/9.462a7edb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7c783487.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Qouson's blog" class="logo"> <span class="site-name can-hide">Qouson's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java SE" class="dropdown-title"><a href="/java/" class="link-title">Java SE</a> <span class="title" style="display:none;">Java SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java 基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/standard/" class="nav-link">基础</a></li><li class="dropdown-subitem"><a href="/java/string/" class="nav-link">String</a></li></ul></li><li class="dropdown-item"><h4>Java 中级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/net/" class="nav-link">网络编程</a></li></ul></li><li class="dropdown-item"><h4>Java 高级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/jvm/" class="nav-link">JVM</a></li><li class="dropdown-subitem"><a href="/java/thread/" class="nav-link">多线程</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring框架" class="dropdown-title"><a href="/spring/" class="link-title">Spring框架</a> <span class="title" style="display:none;">Spring框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/spring/springmvc/" class="nav-link">SpringMVC</a></li><li class="dropdown-item"><!----> <a href="/spring/springboot/" class="nav-link">SpringBoot</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/midware/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/midware/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/midware/redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/midware/mq/" class="nav-link">MQ</a></li><li class="dropdown-item"><!----> <a href="/midware/zookeeper/" class="nav-link">ZooKeeper</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/more/linux/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/more/designpattern/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/more/datastructure/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/more/computerscience/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/more/javaframework/" class="nav-link">Java相关框架</a></li><li class="dropdown-item"><!----> <a href="/more/distribute/" class="nav-link">分布式</a></li><li class="dropdown-item"><!----> <a href="/more/ddd/" class="nav-link">DDD领域驱动设计</a></li><li class="dropdown-item"><!----> <a href="/more/systemdesign/" class="nav-link">系统设计</a></li><li class="dropdown-item"><!----> <a href="/more/chaos/" class="nav-link">杂乱无章</a></li></ul></div></div><div class="nav-item"><a href="/javamap/" class="nav-link">Java知识图谱</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/qouson/my-java-note" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="img/lunhua.png"> <div class="blogger-info"><h3>qouson</h3> <span>Java界的小学生</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java SE" class="dropdown-title"><a href="/java/" class="link-title">Java SE</a> <span class="title" style="display:none;">Java SE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java 基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/standard/" class="nav-link">基础</a></li><li class="dropdown-subitem"><a href="/java/string/" class="nav-link">String</a></li></ul></li><li class="dropdown-item"><h4>Java 中级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/net/" class="nav-link">网络编程</a></li></ul></li><li class="dropdown-item"><h4>Java 高级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/jvm/" class="nav-link">JVM</a></li><li class="dropdown-subitem"><a href="/java/thread/" class="nav-link">多线程</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring框架" class="dropdown-title"><a href="/spring/" class="link-title">Spring框架</a> <span class="title" style="display:none;">Spring框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/spring/springmvc/" class="nav-link">SpringMVC</a></li><li class="dropdown-item"><!----> <a href="/spring/springboot/" class="nav-link">SpringBoot</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/midware/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/midware/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/midware/redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/midware/mq/" class="nav-link">MQ</a></li><li class="dropdown-item"><!----> <a href="/midware/zookeeper/" class="nav-link">ZooKeeper</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/git/" class="nav-link">git</a></li><li class="dropdown-item"><!----> <a href="/more/linux/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/more/designpattern/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/more/datastructure/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/more/computerscience/" class="nav-link">计算机基础</a></li><li class="dropdown-item"><!----> <a href="/more/javaframework/" class="nav-link">Java相关框架</a></li><li class="dropdown-item"><!----> <a href="/more/distribute/" class="nav-link">分布式</a></li><li class="dropdown-item"><!----> <a href="/more/ddd/" class="nav-link">DDD领域驱动设计</a></li><li class="dropdown-item"><!----> <a href="/more/systemdesign/" class="nav-link">系统设计</a></li><li class="dropdown-item"><!----> <a href="/more/chaos/" class="nav-link">杂乱无章</a></li></ul></div></div><div class="nav-item"><a href="/javamap/" class="nav-link">Java知识图谱</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/qouson/my-java-note" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>String</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JVM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>多线程</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/thread-base/" class="sidebar-link">多线程-线程基础</a></li><li><a href="/java/thread-AQS/" class="sidebar-link">多线程-AQS</a></li><li><a href="/java/thread-lock/" class="sidebar-link">多线程-锁</a></li><li><a href="/pages/536157/" aria-current="page" class="active sidebar-link">JUC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/536157/#线程" class="sidebar-link">线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/536157/#线程状态" class="sidebar-link">线程状态</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#新启动线程的方式" class="sidebar-link">新启动线程的方式</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#有t1-t2-t3三个线程-怎样保证t2在t1后-t3在t2后" class="sidebar-link">有T1,T2,T3三个线程，怎样保证T2在T1后，T3在T2后</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/536157/#jmm-java内存模型" class="sidebar-link">JMM，Java内存模型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/536157/#内存可见性" class="sidebar-link">内存可见性</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#原子性" class="sidebar-link">原子性</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#有序性" class="sidebar-link">有序性</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/536157/#等待-通知机制" class="sidebar-link">等待/通知机制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/536157/#thread" class="sidebar-link">Thread</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#object" class="sidebar-link">Object</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#lock-condition" class="sidebar-link">Lock.Condition</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#locksupport" class="sidebar-link">LockSupport</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#范式" class="sidebar-link">范式</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/536157/#compeletablefuture" class="sidebar-link">CompeletableFuture</a></li><li class="sidebar-sub-header level2"><a href="/pages/536157/#volatile" class="sidebar-link">volatile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/536157/#volatile是jvm提供的轻量级的同步机制" class="sidebar-link">volatile是JVM提供的轻量级的同步机制</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#在哪些地方用过volatile" class="sidebar-link">在哪些地方用过volatile</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/536157/#cas-比较并交换" class="sidebar-link">CAS(比较并交换)</a></li><li class="sidebar-sub-header level2"><a href="/pages/536157/#synchronized" class="sidebar-link">synchronized</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/536157/#monitor机制" class="sidebar-link">monitor机制</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#锁对象" class="sidebar-link">锁对象</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#内存结构" class="sidebar-link">内存结构</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#jvm对象描述结构" class="sidebar-link">jvm对象描述结构</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#作用域" class="sidebar-link">作用域</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#锁对象转换" class="sidebar-link">锁对象转换</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#synchronied和lock区别" class="sidebar-link">synchronied和Lock区别</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#aqs-abstractqueuedsynchronizer" class="sidebar-link">AQS（AbstractQueuedSynchronizer）</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#lock" class="sidebar-link">Lock</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#reentrantlock" class="sidebar-link">ReentrantLock</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#reentrantreadwritelock" class="sidebar-link">ReentrantReadWriteLock</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#stampedlock" class="sidebar-link">StampedLock</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#countdownlatch-cyclicbarrier-semaphore" class="sidebar-link">CountDownLatch/CyclicBarrier/Semaphore</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#countdownlatch" class="sidebar-link">CountDownLatch</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#cyclicbarrier" class="sidebar-link">CyclicBarrier</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#semaphore" class="sidebar-link">Semaphore</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#线程池" class="sidebar-link">线程池</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#线程池的种类" class="sidebar-link">线程池的种类</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#threadpoolexecutor" class="sidebar-link">ThreadPoolExecutor</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#threadpoolexecutor执行过程" class="sidebar-link">ThreadPoolExecutor执行过程</a></li><li class="sidebar-sub-header level4"><a href="/pages/536157/#线程池死锁" class="sidebar-link">线程池死锁</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/536157/#threadlocal" class="sidebar-link">ThreadLocal</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/536157/#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#给每个线程提供一个独立副本-与线程强关联-跨方法进行参数传递" class="sidebar-link">给每个线程提供一个独立副本，与线程强关联，跨方法进行参数传递</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#为什么用" class="sidebar-link">为什么用</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#实现" class="sidebar-link">实现</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#用例" class="sidebar-link">用例</a></li><li class="sidebar-sub-header level3"><a href="/pages/536157/#问题" class="sidebar-link">问题</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/java/#JavaSE" data-v-06225672>JavaSE</a></li><li data-v-06225672><a href="/java/#多线程" data-v-06225672>多线程</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/qouson" target="_blank" title="作者" class="beLink" data-v-06225672>qouson</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-05-31</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">JUC<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="juc-java-util-concurrent"><a href="#juc-java-util-concurrent" class="header-anchor">#</a> JUC(java.util.concurrent)</h1> <h2 id="线程"><a href="#线程" class="header-anchor">#</a> 线程</h2> <h3 id="线程状态"><a href="#线程状态" class="header-anchor">#</a> 线程状态</h3> <ul><li><img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240531225949.png" alt=""></li> <li>NEW（新建）：线程对象被创建后，但还没有调用start()方法</li> <li>RUNNABLE（可运行）：线程对象被创建后，调用start()方法，线程处于就绪状态</li> <li>READY（就绪）：线程对象被创建后，调用start()方法，线程处于就绪状态</li> <li>RUINNING（运行）：线程正被操作系统的调度执行，此时若调用yied()方法，只是谦让出时间片，具体是否让出取决于cpu</li> <li>BLOCKED（阻塞）：线程正在等待锁的释放，以便进入同步代码块/方法</li> <li>WATING（等待）：线程处于等待状态，调用wait()方法或者LockSupport.park()方法，进入等待池，等待其他线程调用notify()方法唤醒</li> <li>TIME_WAITING（超时等待）：线程调用了带有时间限制的Threed.sleep(long)或者Object.wait(long)，或者Thread.join(long)或者LockSupport.parkNanos(long)或者LockSupport.parkUntil(long)，进入超时等待，等待指定时间后自动唤醒</li> <li>TERMINATED（终止）：线程执行完毕或因异常而结束，不再处于活动状态</li></ul> <h3 id="新启动线程的方式"><a href="#新启动线程的方式" class="header-anchor">#</a> 新启动线程的方式</h3> <ul><li>继承Thread类，重写run()方法</li> <li>实现Runnable接口，重写run()方法</li> <li>实现Callable接口，重写call()方法</li> <li>线程池</li></ul> <p>官方说法Java中有两种方式来创建线程，一种是继承Thread类，另一种是实现Runnable接口。</p> <h3 id="有t1-t2-t3三个线程-怎样保证t2在t1后-t3在t2后"><a href="#有t1-t2-t3三个线程-怎样保证t2在t1后-t3在t2后" class="header-anchor">#</a> 有T1,T2,T3三个线程，怎样保证T2在T1后，T3在T2后</h3> <ul><li>join():把指定线程加入到当前线程，可以将两个交替执行的线程合并为顺序执行，比如在线程B中调用了线程A的join()方法，直到线程A执行完毕后才会继续执行线程B剩下的代码</li> <li>用Thread#join</li> <li>在T3中调用T2的join()方法</li> <li>在T2中调用T1的join()方法</li></ul> <h2 id="jmm-java内存模型"><a href="#jmm-java内存模型" class="header-anchor">#</a> JMM，Java内存模型</h2> <p>mian内存：所有线程共享的内存，包括堆内存和栈内存
线程私有内存：每个线程都有自己私有的内存，包括程序计数器、虚拟机栈和本地方法栈
线程执行时，会从主内存中读取数据到线程私有内存中，执行后将结果写入到主内存中</p> <h3 id="内存可见性"><a href="#内存可见性" class="header-anchor">#</a> 内存可见性</h3> <ul><li>可见性：一个线程修改了共享变量的值，其他线程能够立即看到修改的值</li></ul> <h3 id="原子性"><a href="#原子性" class="header-anchor">#</a> 原子性</h3> <ul><li>原子性：一个操作或多个操作，要么全部执行，要么全部不执行</li></ul> <h3 id="有序性"><a href="#有序性" class="header-anchor">#</a> 有序性</h3> <ul><li>有序性：程序执行的顺序按照代码的先后顺序执行</li></ul> <h2 id="等待-通知机制"><a href="#等待-通知机制" class="header-anchor">#</a> 等待/通知机制</h2> <h3 id="thread"><a href="#thread" class="header-anchor">#</a> Thread</h3> <ul><li>Thread.yied()：让出时间片，让其他线程运行，不会释放锁</li> <li>Thread.sleep(long)：休眠指定时间，不会释放锁</li> <li>Thread.join()：等待其他线程执行完毕，不会释放锁</li></ul> <h3 id="object"><a href="#object" class="header-anchor">#</a> Object</h3> <ul><li>线程A调用了对象O的wait()方法，另一个线程B调用了对象O的notify()方法或者notifyAll()，线程A收到通知后从对象O的wait()方法返回</li> <li>等待，Object.wait()，释放当前线程持有的锁，唤醒后重新抢锁</li> <li>通知，Object.notifyAll()</li> <li>强制在同步块中调用，否则抛出IllegalMonitorStateException</li></ul> <h3 id="lock-condition"><a href="#lock-condition" class="header-anchor">#</a> Lock.Condition</h3> <ul><li>condition.await()：释放当前线程持有的锁，唤醒后重新抢锁</li> <li>conditon.signal()：唤醒一个等待的线程</li></ul> <h3 id="locksupport"><a href="#locksupport" class="header-anchor">#</a> LockSupport</h3> <ul><li>LockSupport.park()：释放当前线程持有的锁，唤醒后重新抢锁</li> <li>调用LockSupport.unpark(Thread)方法，唤醒指定线程</li></ul> <h3 id="范式"><a href="#范式" class="header-anchor">#</a> 范式</h3> <ul><li>等待方</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>加锁<span class="token punctuation">(</span>对象<span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>条件不满足<span class="token punctuation">)</span><span class="token punctuation">{</span>
对象<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
进入后面的业务逻辑
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>通知方</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>加锁<span class="token punctuation">(</span>对象<span class="token punctuation">)</span><span class="token punctuation">{</span>
加锁<span class="token punctuation">(</span>对象<span class="token punctuation">)</span><span class="token punctuation">{</span>
业务逻辑，改变条件
对象<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="compeletablefuture"><a href="#compeletablefuture" class="header-anchor">#</a> CompeletableFuture</h2> <ul><li>使用Runable或Callable实例来提交任务</li> <li>调用get()方法，阻塞等待任务执行完成</li> <li>调用join()方法，阻塞等待任务执行完成</li> <li>runAsyn()方法，提交任务后立即返回void</li> <li>supplyAsync()方法，提交任务后立即返回值</li> <li>anyOf()方法，多个任务中任意一个执行完成就返回</li> <li>allOf()方法，多个任务全部执行完成才返回</li></ul> <h2 id="volatile"><a href="#volatile" class="header-anchor">#</a> volatile</h2> <h3 id="volatile是jvm提供的轻量级的同步机制"><a href="#volatile是jvm提供的轻量级的同步机制" class="header-anchor">#</a> volatile是JVM提供的轻量级的同步机制</h3> <ul><li>保证可见性</li> <li>禁止指令重排</li> <li>不保证原子性</li></ul> <h3 id="在哪些地方用过volatile"><a href="#在哪些地方用过volatile" class="header-anchor">#</a> 在哪些地方用过volatile</h3> <ul><li>单例模式DCL代码</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> instance<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span><span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> instaince<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
       <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="cas-比较并交换"><a href="#cas-比较并交换" class="header-anchor">#</a> CAS(比较并交换)</h2> <ul><li>预期值(expected value)，当前值(current value，内存中的值)，新值(new value)，检测当前值是否与预期值相同，如果是，则将当前值更新为新值。compareAndSet(originalValue=expected Value,newValue)</li> <li>底层原理，UnSafe类中的compareAndSwapInt()方法</li> <li>CAS的缺点
<ul><li>循环时间长，开销大</li> <li>只能保证一个共享变量的原子操作</li> <li>会引出ABA问题</li></ul></li></ul> <h2 id="synchronized"><a href="#synchronized" class="header-anchor">#</a> synchronized</h2> <h3 id="monitor机制"><a href="#monitor机制" class="header-anchor">#</a> monitor机制</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ObjectMonitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _header       <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> <span class="token comment">//对象头  markOop</span>
    _count        <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    _waiters      <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>   
    _recursions   <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">// 锁的重入次数</span>
    _object       <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>  <span class="token comment">//存储锁对象</span>
    _owner        <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>  <span class="token comment">// 标识拥有该monitor的线程（当前获取锁的线程）</span>
    _WaitSet      <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>  <span class="token comment">// 等待线程（调用wait）组成的双向循环链表，_WaitSet是第一个节点</span>
    _WaitSetLock  <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>   
    _Responsible  <span class="token operator">=</span> <span class="token constant">NULL</span> <span class="token punctuation">;</span>
    _succ         <span class="token operator">=</span> <span class="token constant">NULL</span> <span class="token punctuation">;</span>
    _cxq          <span class="token operator">=</span> <span class="token constant">NULL</span> <span class="token punctuation">;</span> <span class="token comment">//多线程竞争锁会先存到这个单向链表中 （FILO栈结构）</span>
    <span class="token class-name">FreeNext</span>      <span class="token operator">=</span> <span class="token constant">NULL</span> <span class="token punctuation">;</span>
    _EntryList    <span class="token operator">=</span> <span class="token constant">NULL</span> <span class="token punctuation">;</span> <span class="token comment">//存放在进入或重新进入时被阻塞(blocked)的线程 (也是存竞争锁失败的线程)</span>
    _SpinFreq     <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
    _SpinClock    <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
    <span class="token class-name">OwnerIsThread</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
    _previous_owner_tid <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240531235104.png" alt=""> <img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240531235124.png" alt=""></p> <h3 id="锁对象"><a href="#锁对象" class="header-anchor">#</a> 锁对象</h3> <h4 id="内存结构"><a href="#内存结构" class="header-anchor">#</a> 内存结构</h4> <p><img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240531235208.png" alt=""></p> <ul><li>对象头
<ul><li>Mark Word（存储对象的HashCode，分代年龄和锁标志位信息）</li> <li>Class Pointer（指向对象的类元数据，虚拟机通过这个指针来确定这个对象是哪个类的实例）</li> <li>Moenitor（指向对象的锁）
<ul><li>EntryList</li> <li>Owner（会指向持有Monitor对象的线程）</li> <li>WaitSet</li></ul></li></ul></li> <li>实例数据</li> <li>填充数据</li></ul> <h4 id="jvm对象描述结构"><a href="#jvm对象描述结构" class="header-anchor">#</a> jvm对象描述结构</h4> <ul><li>32位
<img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240531235540.png" alt=""></li> <li>64位
<img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240531235600.png" alt=""></li></ul> <h3 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h3> <ul><li>方法：ACC_SYNCHRONIZED</li> <li>代码块：monitorenter和monitorexit</li></ul> <h3 id="锁对象转换"><a href="#锁对象转换" class="header-anchor">#</a> 锁对象转换</h3> <ul><li><img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240531235740.png" alt=""></li> <li>无锁</li> <li>偏向锁
<ul><li>Mark Word中有线程信息cas比较</li> <li>升级，
<ul><li>没有位置保存hashCode，所以在其中调用对象的hashCode()方法会导致锁撤销
<ul><li>处于可偏向的时候，调用obj.hashCode()，Mark Word将变成未锁定状态，升级为轻量级锁</li> <li>处于已偏向的时候，调用obj.hashCode()，升级为重量级锁</li></ul></li> <li>notify/wait
<ul><li>obj.notify()，升级为轻量级锁</li> <li>obj.wait()，升级为重量级锁</li></ul></li></ul></li> <li>锁撤销</li></ul></li> <li>轻量级锁
<ul><li>复制了一份Mark Word到线程栈中，CAS比较</li> <li>轻微竞争场景</li> <li>同一时间多个线程竞争锁，升级为重量级锁</li></ul></li> <li>重量级锁
<ul><li>复制一份Mark Word到Monitor中，指向monitor对象</li></ul></li></ul> <h3 id="synchronied和lock区别"><a href="#synchronied和lock区别" class="header-anchor">#</a> synchronied和Lock区别</h3> <ul><li>synchronied是jvm实现的锁，Lock是JDK实现的锁</li> <li>synchronied是自动释放锁，Lock需要手动释放</li> <li>synchronied是非公平锁，Lock可以设置公平锁</li> <li>synchronied锁住方法和代码块，Lock锁住代码块</li></ul> <h3 id="aqs-abstractqueuedsynchronizer"><a href="#aqs-abstractqueuedsynchronizer" class="header-anchor">#</a> AQS（AbstractQueuedSynchronizer）</h3> <ul><li>AQS
<ul><li><img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240601000638.png" alt=""></li></ul></li> <li>CLH
<ul><li><img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240601000701.png" alt=""></li></ul></li> <li>变种CLH，将每条请求共享变量的线程封装成一个节点
<ul><li><img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240601000721.png" alt=""></li></ul></li> <li>volatile int state</li> <li>变种的CLH双向队列</li></ul> <h3 id="lock"><a href="#lock" class="header-anchor">#</a> Lock</h3> <h4 id="reentrantlock"><a href="#reentrantlock" class="header-anchor">#</a> ReentrantLock</h4> <ul><li>NonfairSync
<ul><li>tryAcquire</li> <li>acquireQueued</li> <li>CAS</li> <li>可能会授予刚刚请求它的线程，而不考虑等待时间</li></ul></li> <li>FairSync
<ul><li>hasQueuedPredecessors</li> <li>会授予等待时间最长的线程</li></ul></li></ul> <h4 id="reentrantreadwritelock"><a href="#reentrantreadwritelock" class="header-anchor">#</a> ReentrantReadWriteLock</h4> <ul><li>ReadLock</li> <li>WriteLock</li></ul> <h4 id="stampedlock"><a href="#stampedlock" class="header-anchor">#</a> StampedLock</h4> <h3 id="countdownlatch-cyclicbarrier-semaphore"><a href="#countdownlatch-cyclicbarrier-semaphore" class="header-anchor">#</a> CountDownLatch/CyclicBarrier/Semaphore</h3> <h4 id="countdownlatch"><a href="#countdownlatch" class="header-anchor">#</a> CountDownLatch</h4> <ul><li>只有一个构造方法 只会被赋值一次</li> <li>没有别的方法可以修改 count</li> <li>让一些线程阻塞直到另一些线程完成操作后才被唤醒（班长关门）</li> <li>主要有两个方法，await方法会被阻塞。countDown会让计数器-1，不会阻塞。将计数器变为0时，调用await方法的线程会被唤醒，继续执行。</li> <li>相当于CompletableFuture.allOf()</li> <li>CountDownLatchDemo</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CountDownLatchDemo</span> <span class="token punctuation">{</span>
    <span class="token comment">//6个同学陆续离开教室之后，班长锁门</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>

        <span class="token comment">//创建CountDownLatch对象，设置初始值</span>
        <span class="token class-name">CountDownLatch</span> countDownLatch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//6个同学陆续离开教室之后</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span><span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; 号同学离开了教室&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">//计数  -1</span>
                countDownLatch<span class="token punctuation">.</span><span class="token function">countDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//等待</span>
        countDownLatch<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; 班长锁门走人了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="cyclicbarrier"><a href="#cyclicbarrier" class="header-anchor">#</a> CyclicBarrier</h4> <ul><li>CyclicBarrie字面上就是可循环使用的屏障。当一组线程得到一个屏障（同步点）时被阻塞，直到最后一个线程到达屏障时，屏障才会打开，所有被屏障拦截的线程才会继续工作。进入屏障通过await方法。</li> <li>CyclicBarrierDemo</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//集齐7颗龙珠就可以召唤神龙</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CyclicBarrierDemo</span> <span class="token punctuation">{</span>

    <span class="token comment">//创建固定值</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">NUMBER</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//创建CyclicBarrier</span>
        <span class="token class-name">CyclicBarrier</span> cyclicBarrier <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">CyclicBarrier</span><span class="token punctuation">(</span><span class="token constant">NUMBER</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;*****集齐7颗龙珠就可以召唤神龙&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//集齐七颗龙珠过程</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span><span class="token number">7</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; 星龙被收集到了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//等待</span>
                    cyclicBarrier<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="semaphore"><a href="#semaphore" class="header-anchor">#</a> Semaphore</h4> <ul><li>信号量主要用于两个目的，一个是多个共享资源的互斥使用，一个是并发线程数的控制。</li> <li>SemaphoreDemo</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//6辆汽车，停3个车位</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SemaphoreDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//创建Semaphore，设置许可数量</span>
        <span class="token class-name">Semaphore</span> semaphore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Semaphore</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//模拟6辆汽车</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span><span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token comment">//抢占</span>
                    semaphore<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; 抢到了车位&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">//设置随机停车时间</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; ------离开了车位&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                    <span class="token comment">//释放</span>
                    semaphore<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="线程池"><a href="#线程池" class="header-anchor">#</a> 线程池</h3> <h4 id="线程池的种类"><a href="#线程池的种类" class="header-anchor">#</a> 线程池的种类</h4> <ul><li>newFixedThreadPool</li> <li>newCacheThreadPool</li> <li>newSIngleTheadExecutor</li> <li>newScheduledThewadPool</li> <li>newWorkStealingPool</li> <li>ThreadPoolExecutor</li></ul> <h4 id="threadpoolexecutor"><a href="#threadpoolexecutor" class="header-anchor">#</a> ThreadPoolExecutor</h4> <ul><li>核心线程数</li> <li>最大线程数</li> <li>空闲时间</li> <li>空闲时间单位</li> <li>缓冲队列
<ul><li>LinkedBlockingQueue，无界 当心内存溢出</li> <li>ArrayBlockingQueue，有界队列，加锁保证安全  一直死循环阻塞 队列不满就唤醒</li> <li>Synchronous</li></ul></li> <li>工厂方法</li> <li>拒绝策略
<ul><li>抛异常：AbortPolicy（默认）：直接抛出RejectedException。</li> <li>丢弃：DiscardPolicy：直接丢弃任务，不做任何处理。</li> <li>丢弃最早提交的：DiscardOldestPolicy：丢弃等待最久的任务。</li> <li>而是回退给调用者：CallerRunsPolicy：不会抛弃任务也不会抛出异常，而是回退给调用者</li></ul></li></ul> <h4 id="threadpoolexecutor执行过程"><a href="#threadpoolexecutor执行过程" class="header-anchor">#</a> ThreadPoolExecutor执行过程</h4> <p>核心线程-&gt;队列-&gt;最大线程-&gt;拒绝策略</p> <h4 id="线程池死锁"><a href="#线程池死锁" class="header-anchor">#</a> 线程池死锁</h4> <ul><li>概念：使用线程池处理任务的时候，由于任务之间相互依赖，资源争用或者其他同步问题，导致所有线程都在等待彼此释放资源而无法继续执行的一种状态。</li></ul> <h2 id="threadlocal"><a href="#threadlocal" class="header-anchor">#</a> ThreadLocal</h2> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <ul><li>set()</li> <li>get()</li> <li>remove()</li></ul> <h3 id="给每个线程提供一个独立副本-与线程强关联-跨方法进行参数传递"><a href="#给每个线程提供一个独立副本-与线程强关联-跨方法进行参数传递" class="header-anchor">#</a> 给每个线程提供一个独立副本，与线程强关联，跨方法进行参数传递</h3> <h3 id="为什么用"><a href="#为什么用" class="header-anchor">#</a> 为什么用</h3> <ul><li>每个线程都保存一份数据，不会造成数据污染</li></ul> <h3 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h3> <ul><li>设想1：synchronized map(thread,T)</li> <li>实际实现：不只一个T，ThreadLoalMap，定义在ThreadLocal，从Thread声明ThreadLocal.ThreadLocalMap</li> <li><img src="https://cdn.jsdelivr.net/gh/qouson/my-pic-bed/pic/20240601002106.png" alt=""></li></ul> <h3 id="用例"><a href="#用例" class="header-anchor">#</a> 用例</h3> <ul><li>jdbc原生</li> <li>连接池，事务，多个sql可能不在同一个连接，解决方式一、传递conn</li> <li>spring，事务管理器用ThreadLocal存连接</li> <li>微服务，链路追踪</li> <li>动态数据源，用来保存当前线程应该使用哪个数据源</li></ul> <h3 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h3> <ul><li>内存泄漏，ThreadLocalMap的key是弱引用，如果线程没有强引用指向ThreadLocal，那么就会回收，但是value是强引用，如果value没有回收，就会造成内存泄漏</li></ul></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/qouson/my-java-note/edit/master/docs/10.JavaSE/50.多线程/40.JUC.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/06/01, 00:32:42</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/java/thread-lock/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">多线程-锁</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/java/thread-lock/" class="prev">多线程-锁</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/ce67c7/"><div>
            杂乱无章
            <!----></div></a> <span class="date">12-25</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/fb8108/"><div>
            基础-大彬
            <!----></div></a> <span class="date">11-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/b31312/"><div>
            集合-大彬
            <!----></div></a> <span class="date">11-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:jiangjinchao1642@foxmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/qouson" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2025
    <span>qouson</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.001dee7f.js" defer></script><script src="/assets/js/2.9f32b1ef.js" defer></script><script src="/assets/js/43.0d87b11c.js" defer></script>
  </body>
</html>
